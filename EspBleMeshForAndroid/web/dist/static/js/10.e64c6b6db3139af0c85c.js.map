{"version":3,"sources":["webpack:///src/pages/sigprovision.vue","webpack:///./src/pages/sigprovision.vue?8466","webpack:///./src/pages/sigprovision.vue"],"names":["sigprovision","data","blueEnable","scanDeviceList","configType","isBleScan","locationGranted","locationEnabled","pushDeviceId","connectContent","connectData","timeOutLoading","loadingMsg","this","$t","isBleConnect","created","self","window","res","scanCallback","connectCallback","onBackPressed","provisioningCallback","watch","$route","methods","extends_default","Object","vuex_esm","setNum","scanDevice","console","log","messageRemind","EspBleMesh","startScan","stringify_default","type","webLog","stopScan","getPath","path","msg","mint_ui_common","message","position","getRssiIcon","rssi","utils","getBLERssiIcon","showBlueFail","hide","setTimeout","$store","commit","$router","goBack","provisionItem","item","id","connect","disconnect","base64","decode","JSON","parse","_isEmpty","sort","sortBy","status","constant_default","a","STATUS_GATT_CONNECTED","STATUS_GATT_DISCONNECTED","clearTimeout","STATUS_DEVICE_NOT_FOUND","STATUS_PROVISIONING_READY","togo","name","query","oobMethods","deviceId","STATUS_FAILED","mounted","state","scanProvisioning","computed","number","home","getBlueEnable","blueInfo","pages_sigprovision","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","_s","directives","rawName","value","expression","$event","_l","index","key","target","currentTarget","stopPropagation","attrs","src","_m","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.e64c6b6db3139af0c85c.js","sourcesContent":["<template>\r\n  <div class=\"content-box\">\r\n    <div class=\"title-info\">\r\n      <h4 class=\"app-title\"><span @click=\"hide\"><i class=\"icon-left back\"></i></span>{{configType == 1 ? $t('sigprovision') : $t('fastprovision')}}</h4>\r\n      <div v-show=\"!getBlueEnable\"  @click=\"showBlueFail\" class=\"bluetooth-second-base\">\r\n        <i class=\"icon-bluetooth bluetooth-second-style\"></i>\r\n      </div>\r\n      <span @click=\"scanDevice(isBleScan)\" class=\"right-top-text\">{{isBleScan ? $t('scan') : $t('stopscan')}}</span>\r\n    </div>\r\n    <div class=\"device-list-base\">\r\n      <div class=\"overflow-touch\">\r\n        <div @click.self=\"provisionItem(item)\" v-for=\"(item, index) in scanDeviceList\" :key=\"index\" class=\"device-list-cell\">\r\n          <div class=\"item-content\">\r\n            <span @click.stop=\"provisionItem(item)\">{{item.name}}</span>\r\n            <span @click.stop=\"provisionItem(item)\" class=\"desc\">{{item.id}}</span>\r\n          </div>\r\n          <img v-show=\"item.rssi <= 0\" class=\"item-img\" :src=\"getRssiIcon(item.rssi)\"/>\r\n          <i class=\"icon-right text-color\"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div v-show=\"isBleConnect\" class=\"connect-loading\">\r\n      <span>{{loadingMsg}}</span>\r\n      <div class=\"loading-base\">\r\n        <div class=\"loading-content\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapMutations, mapGetters, mapState} from 'vuex'\r\nimport Util from \"../assets/tool/utils\";\r\nimport {Toast, Indicator, MessageBox} from 'mint-ui'\r\nimport Constant from '../assets/tool/constant'\r\nexport default {\r\n  data () {\r\n    return {\r\n      blueEnable: false,\r\n      scanDeviceList: [],\r\n      configType: '',\r\n      isBleScan: true,\r\n      locationGranted: true,\r\n      locationEnabled: true,\r\n      pushDeviceId: '',\r\n      connectContent: 0,\r\n      connectData: '',\r\n      timeOutLoading: '',\r\n      loadingMsg: this.$t('connecting'),\r\n      isBleConnect: false\r\n    }\r\n  },\r\n  created: function () {\r\n    const self = this\r\n    window['scanCallback'] = (res) => {\r\n      self.scanCallback(res)\r\n    }\r\n    window['connectCallback'] = (res) => {\r\n      self.connectCallback(res)\r\n    }\r\n    window['onBackPressed'] = () => {\r\n      self.onBackPressed()\r\n    }\r\n    window['provisioningCallback'] = (res) => {\r\n      self.provisioningCallback(res)\r\n    }\r\n  },\r\n  watch: {\r\n    '$route':'getPath'\r\n  },\r\n  methods: {\r\n    ...mapMutations({\r\n      setNum: 'SET_NUM'\r\n    }),\r\n    scanDevice (isBleScan) {\r\n      var self = this\r\n      console.log('扫描或者停止扫描 scanDevice : ' + isBleScan)\r\n      if (isBleScan) {\r\n        console.log('blueEnable:' + this.blueEnable + '  locationEnabled:' + this.locationEnabled + '  locationGranted:' + this.locationGranted)\r\n        if (!self.blueEnable) {\r\n          self.messageRemind(self.$t('notbluetooth'))\r\n          return\r\n        }\r\n        if (!self.locationEnabled) {\r\n          self.messageRemind(self.$t('notlocation'))\r\n          return\r\n        }\r\n        if (!self.locationGranted) {\r\n          self.messageRemind(self.$t('notgps'))\r\n          return\r\n        }\r\n        var scanData = {'type':'provisioning'}\r\n        EspBleMesh.startScan(JSON.stringify(scanData))\r\n        self.isBleScan = false\r\n      } else {\r\n        EspBleMesh.webLog('停止扫描')\r\n        EspBleMesh.stopScan()\r\n        self.isBleScan = true\r\n      }\r\n    },\r\n    getPath(){\r\n      var self = this\r\n      console.log('scan 路由发生变化' + this.$route.path);\r\n    },\r\n    messageRemind (msg) {\r\n      Toast({\r\n        message: msg,\r\n        position: 'bottom'\r\n      })\r\n    },\r\n    getRssiIcon (rssi) {\r\n      return Util.getBLERssiIcon(rssi)\r\n    },\r\n    showBlueFail () {\r\n      console.log('点击蓝牙按钮')\r\n    },\r\n    hide () {\r\n      var self = this\r\n      setTimeout(() => {\r\n        EspBleMesh.stopScan()\r\n      })\r\n      self.scanDeviceList = []\r\n      console.log('返回 Home 页面')\r\n      this.isBleScan = true\r\n      this.$store.commit('setScanProvisioning', [])\r\n      self.$router.goBack()\r\n    },\r\n    onBackPressed () {\r\n      this.isBleScan = true\r\n      EspBleMesh.stopScan()\r\n      this.$store.commit('setScanProvisioning', [])\r\n      this.$router.goBack()\r\n    },\r\n    provisionItem (item) {\r\n      var self = this\r\n      self.loadingMsg = self.$t('connecting')\r\n      console.log('FBY provisionItem: ' + self.loadingMsg)\r\n      self.isBleConnect = true\r\n      this.isBleScan = true\r\n      EspBleMesh.stopScan()\r\n      self.pushDeviceId = item.id\r\n      self.connectData = {'id': item.id, 'type': 'provisioning'}\r\n      console.log('FBY connectData: ' + JSON.stringify(self.connectData))\r\n      // Indicator.open(self.loadingMsg)\r\n      EspBleMesh.connect(JSON.stringify(self.connectData))\r\n      self.timeOutLoading = setTimeout(function () {\r\n        // Indicator.close()\r\n        self.isBleConnect = false\r\n        self.messageRemind(self.$t('connecttimeout'))\r\n        EspBleMesh.disconnect()\r\n      }, 25000)\r\n    },\r\n    scanCallback (res) {\r\n      var self = this\r\n      res = Util.base64().decode(res)\r\n      res = JSON.parse(res)\r\n      if (!Util._isEmpty(res)) {\r\n        res.sort(Util.sortBy(\"rssi\", 0));\r\n        self.$store.commit('setScanProvisioning', res)\r\n        console.log('scanCallback: ' + JSON.stringify(res))\r\n        self.scanDeviceList = res;\r\n      }\r\n    },\r\n    connectCallback (res) {\r\n      var self = this\r\n      res = Util.base64().decode(res)\r\n      console.log('FBY connectCallback' + res + '重试次数' + self.connectContent)\r\n      res = JSON.parse(res)\r\n      if (!Util._isEmpty(res)) {\r\n        switch(res.status) {\r\n          case Constant.STATUS_GATT_CONNECTED:\r\n            console.log('设备蓝牙连接成功 12345678900987654321')\r\n            self.loadingMsg = self.$t('devicebleconnectsuc')\r\n            break\r\n          case Constant.STATUS_GATT_DISCONNECTED:\r\n            if (self.connectContent > 5) {\r\n              self.isBleConnect = false\r\n              clearTimeout(self.timeOutLoading)\r\n              self.messageRemind(self.$t('bleconnectfail'))\r\n            } else {\r\n              self.loadingMsg = self.$t('devicebleconnectfail')\r\n              if (!Util._isEmpty(self.connectData)) {\r\n                console.log('fby connect 2')\r\n                EspBleMesh.connect(JSON.stringify(self.connectData))\r\n              }\r\n              self.connectContent ++\r\n            }\r\n            break\r\n          case Constant.STATUS_DEVICE_NOT_FOUND:\r\n            self.isBleConnect = false\r\n            clearTimeout(self.timeOutLoading)\r\n            self.messageRemind(self.$t('bleparameterfail'))\r\n            break\r\n          case Constant.STATUS_PROVISIONING_READY:\r\n            // Indicator.close()\r\n            self.isBleConnect = false\r\n            self.connectContent = 0\r\n            self.loadingMsg = self.$t('connecting')\r\n            clearTimeout(self.timeOutLoading)\r\n            self.$router.togo({\r\n              name: 'capabilities',\r\n              query: {\r\n                'name': res.name,\r\n                'oobMethods': res.oobMethods,\r\n                'deviceId': self.pushDeviceId\r\n              }\r\n            })\r\n            break\r\n        }\r\n      }\r\n    },\r\n    provisioningCallback (res) {\r\n      var self = this\r\n      res = Util.base64().decode(res)\r\n      console.log('FBY provisioningCallback' + res + '重试次数' + self.connectContent)\r\n      res = JSON.parse(res)\r\n      if (!Util._isEmpty(res)) {\r\n        if (res.status === Constant.STATUS_FAILED) {\r\n          if (self.connectContent > 5) {\r\n            self.isBleConnect = false\r\n            clearTimeout(self.timeOutLoading)\r\n            self.messageRemind(self.$t('provisioningfail'))\r\n          } else {\r\n            self.loadingMsg = self.$t('devicerssipool')\r\n            if (!Util._isEmpty(self.connectData)) {\r\n              console.log('fby FAILED 2')\r\n              EspBleMesh.connect(JSON.stringify(self.connectData))\r\n            }\r\n            self.connectContent ++\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  mounted () {\r\n    console.log('Sigprovision 传参打印' + JSON.stringify(this.$route.query))\r\n    this.configType = this.$route.query.type\r\n    this.scanDeviceList = this.$store.state.scanProvisioning\r\n    this.connectContent = 0\r\n    this.loadingMsg = this.$t('connecting')\r\n    this.scanDevice(this.isBleScan)\r\n    // this.scanDeviceList = [\r\n    //   {'name': 'light-1', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '30'},\r\n    //   {'name': 'light-2', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-80'},\r\n    //   {'name': 'light-3', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-70'},\r\n    //   {'name': 'light-4', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-60'},\r\n    //   {'name': 'light-5', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-50'},\r\n    //   {'name': 'light-6', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-40'},\r\n    //   {'name': 'light-7', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-30'},\r\n    //   {'name': 'light-8', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-20'},\r\n    //   {'name': 'light-9', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-10'},\r\n    //   {'name': 'light-10', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-30'},\r\n    //   {'name': 'light-11', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-30'},\r\n    //   {'name': 'light-12', 'id': 'B4:E6:2D:EB:09:87', 'rssi': '-30'}]\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'number'\r\n    ]),\r\n    ...mapState({\r\n      number: state => state.home.number\r\n    }),\r\n    getBlueEnable () {\r\n      console.log('状态实时更新')\r\n      this.blueEnable = this.$store.state.blueInfo\r\n      this.locationGranted = this.$store.state.locationGranted\r\n      this.locationEnabled = this.$store.state.locationEnabled\r\n      return this.blueEnable\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  @import '../assets/css/index.less';\r\n  .device-list-base {\r\n    margin-top: 50px;\r\n    height: calc(100% - 50px);\r\n    background: #f6f6f6;\r\n    box-sizing: border-box;\r\n  }\r\n  .device-list-cell {\r\n    padding: 10px 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    min-width: calc(100% - 130px);\r\n    box-sizing: border-box;\r\n    border-bottom: 1px solid #e6e6e6;\r\n    -webkit-transition: all .3s linear;\r\n    transition: all .3s linear;\r\n  }\r\n  .item-content {\r\n    display: flex;\r\n    flex: 1;\r\n    flex-flow: column;\r\n  }\r\n  .text-color {\r\n    /*margin-top: 5px;*/\r\n    /*width: 40px;*/\r\n    color: @Secondary-font-color;\r\n    /*font-size: 12px;*/\r\n  }\r\n  .device-list-cell .item-img {\r\n    width: 32px;\r\n    height: 28px;\r\n    margin-right: 40px;\r\n  }\r\n  .connect-loading {\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 100000;\r\n    position: absolute;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n    background-color: rgba(225, 225, 225, .3);\r\n  }\r\n  .loading-base {\r\n    width: 50%;\r\n    height: 10px;\r\n    margin: 10px 25%;\r\n    background-color: #a0a0a0;\r\n    position: relative;\r\n    overflow: hidden;\r\n  }\r\n  @keyframes scan-loading {\r\n    0% {\r\n      left: -90px;\r\n    }\r\n    50% {\r\n      left: 50px;\r\n    }\r\n    100% {\r\n      left: 190px;\r\n    }\r\n  }\r\n  .loading-content {\r\n    width: 40%;\r\n    height: 10px;\r\n    background-color: #fa2d28;\r\n    position: absolute;\r\n    animation: scan-loading 1s linear infinite;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/sigprovision.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content-box\"},[_c('div',{staticClass:\"title-info\"},[_c('h4',{staticClass:\"app-title\"},[_c('span',{on:{\"click\":_vm.hide}},[_c('i',{staticClass:\"icon-left back\"})]),_vm._v(_vm._s(_vm.configType == 1 ? _vm.$t('sigprovision') : _vm.$t('fastprovision')))]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.getBlueEnable),expression:\"!getBlueEnable\"}],staticClass:\"bluetooth-second-base\",on:{\"click\":_vm.showBlueFail}},[_c('i',{staticClass:\"icon-bluetooth bluetooth-second-style\"})]),_vm._v(\" \"),_c('span',{staticClass:\"right-top-text\",on:{\"click\":function($event){return _vm.scanDevice(_vm.isBleScan)}}},[_vm._v(_vm._s(_vm.isBleScan ? _vm.$t('scan') : _vm.$t('stopscan')))])]),_vm._v(\" \"),_c('div',{staticClass:\"device-list-base\"},[_c('div',{staticClass:\"overflow-touch\"},_vm._l((_vm.scanDeviceList),function(item,index){return _c('div',{key:index,staticClass:\"device-list-cell\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.provisionItem(item)}}},[_c('div',{staticClass:\"item-content\"},[_c('span',{on:{\"click\":function($event){$event.stopPropagation();return _vm.provisionItem(item)}}},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('span',{staticClass:\"desc\",on:{\"click\":function($event){$event.stopPropagation();return _vm.provisionItem(item)}}},[_vm._v(_vm._s(item.id))])]),_vm._v(\" \"),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(item.rssi <= 0),expression:\"item.rssi <= 0\"}],staticClass:\"item-img\",attrs:{\"src\":_vm.getRssiIcon(item.rssi)}}),_vm._v(\" \"),_c('i',{staticClass:\"icon-right text-color\"})])}),0)]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isBleConnect),expression:\"isBleConnect\"}],staticClass:\"connect-loading\"},[_c('span',[_vm._v(_vm._s(_vm.loadingMsg))]),_vm._v(\" \"),_vm._m(0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"loading-base\"},[_c('div',{staticClass:\"loading-content\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-265195e5\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/sigprovision.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-265195e5\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sigprovision.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./sigprovision.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./sigprovision.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-265195e5\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./sigprovision.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-265195e5\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/sigprovision.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}